{% extends "base.html" %} {% block content %}

<div class="container">
  <img
    src="{{ url_for('static', filename='CISAImage.png') }}"
    alt="CISA seal image"
    width="200"
    height="200"
  />
  <div>
    <h2>Instructions</h2>
    <ol type="1">
      <li>
        Add <b>all</b> orgs through the "Add New Stakeholders" Form Button
      </li>
      <li>Verify you have added all the orgs for this run</li>
      <li>
        Fill the ips for all orgs by clicking the "Fill Ips" Button. This will
        take a while to run
      </li>
      <li>
        Launch the "Link Subs from IPs button. This will take over 11 days to
        run so just make sure it is started
      </li>
    </ol>
    <p></p>
  </div>

  <div id="loading" class="justify-content-lg-center"></div>
  <div class="row justify-content-lg-center">
    <div class="row col-lg-6 offset-lg-3">
      <input
        type="hidden"
        value="{% block title %} Stakeholder {% endblock%}"
      />

      <button type="button" class="btn btn-primary" onclick="showDiv()">
        Add New Stakeholder
      </button>
      <div style="height: 3em"></div>
      <input type="button" id="cidrs_fill_ips" value="Fill IPs" />
      <div style="height: 3em"></div>

      <input type="button" id="test" value="Link Subs from IPs" />
    </div>
    <br />

    <div id="TestsDiv" class="row justify-content-lg-center">
      <div class="d-flex justify-content-center">
        <div class="card" id="content">
          <div class="card-header text-white bg-primary mb-3">
            Add New Stakeholder
          </div>
          <div class="card-body">
            <form method="post">
              {{ formExternal.hidden_tag() }} {{
              formExternal.cust.label(style='font-size: 24px') }} {{
              formExternal.cust(class='form-control') }} {{
              formExternal.custDomainAliases.label(style='font-size: 24px') }}
              {{ formExternal.custDomainAliases(class='form-control') }} {{
              formExternal.custRootDomain.label(style='font-size: 24px') }} {{
              formExternal.custRootDomain(class='form-control') }} {{
              formExternal.custExecutives.label(style='font-size: 24px') }} {{
              formExternal.custExecutives(class='form-control') }}
              <br />
              {{ formExternal.submit(class='btn btn-primary') }}
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--End of container-->
  <script>
    function showDiv() {
      let T = document.getElementById("TestsDiv"),
        displayValue = "";
      if (T.style.display == "") displayValue = "none";
      T.style.display = displayValue;
    }

    $(function () {
      $("#test").click(function (event) {
        $.getJSON("/link_IPs", {}, function (data) {});
        return false;
      });
    });

    $(function () {
      $("#cidrs_fill_ips").click(function (event) {
        $.getJSON("/fill_IPs", {}, function (data) {});
        return false;
      });
    });

    function loading() {
      $("#loading").show();
      $("#content").hide();
    }

    $(document).ready(function () {
      console.log("Im ready ");

      showDiv();

      setTimeout(function () {
        $("#messageDiv").fadeOut("fast");
      }, 5000);
      $(window).load(function () {
        $("#loading").hide();
      });
    });
  </script>

  {% endblock %}
</div>
